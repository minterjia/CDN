var LIVE2DCUBISMFRAMEWORK;!function(t){var e=function(t,e){this.time=t,this.value=e};t.AnimationPoint=e;var i=function(t,e){this.time=t,this.value=e};t.AnimationUserDataBody=i;var a=function(){function t(){}return t.lerp=function(t,i,a){return new e(t.time+(i.time-t.time)*a,t.value+(i.value-t.value)*a)},t.LINEAR=function(t,e,i){var a=t[e+0],r=t[e+1],n=(i-a.time)/(r.time-a.time);return a.value+(r.value-a.value)*n},t.BEZIER=function(e,i,a){var r=(a-e[i+0].time)/(e[i+3].time-e[i].time),n=t.lerp(e[i+0],e[i+1],r),s=t.lerp(e[i+1],e[i+2],r),o=t.lerp(e[i+2],e[i+3],r),u=t.lerp(n,s,r),l=t.lerp(s,o,r);return t.lerp(u,l,r).value},t.STEPPED=function(t,e,i){return t[e+0].value},t.INVERSE_STEPPED=function(t,e,i){return t[e+1].value},t}();t.BuiltinAnimationSegmentEvaluators=a;var r=function(t,e){this.offset=t,this.evaluate=e};t.AnimationSegment=r;var n=function(){function t(t,e,i){this.targetId=t,this.points=e,this.segments=i}return t.prototype.evaluate=function(t){for(var e=0,i=this.segments.length-1;e<i&&this.points[this.segments[e+1].offset].time<t;++e);return this.segments[e].evaluate(this.points,this.segments[e].offset,t)},t}();t.AnimationTrack=n;var s=function(){function t(t){var s=this;this.modelTracks=new Array,this.parameterTracks=new Array,this.partOpacityTracks=new Array,this.userDataBodys=new Array,this.duration=t.Meta.Duration,this.fps=t.Meta.Fps,this.loop=t.Meta.Loop,this.userDataCount=t.Meta.UserDataCount,this.totalUserDataSize=t.Meta.TotalUserDataSize,null!=t.UserData&&(t.UserData.forEach((function(t){s.userDataBodys.push(new i(t.Time,t.Value))})),console.assert(this.userDataBodys.length===this.userDataCount)),t.Curves.forEach((function(t){var i=t.Segments,o=new Array,u=new Array;o.push(new e(i[0],i[1]));for(var l=2;l<i.length;l+=3){var h=o.length-1,c=a.LINEAR,p=i[l];1==p?(c=a.BEZIER,o.push(new e(i[l+1],i[l+2])),o.push(new e(i[l+3],i[l+4])),l+=4):2==p?c=a.STEPPED:3==p&&(c=a.INVERSE_STEPPED),o.push(new e(i[l+1],i[l+2])),u.push(new r(h,c))}var f=new n(t.Id,o,u);"Model"==t.Target?s.modelTracks.push(f):"Parameter"==t.Target?s.parameterTracks.push(f):"PartOpacity"==t.Target&&s.partOpacityTracks.push(f)}))}return t.fromMotion3Json=function(e){if(null==e)return null;var i=new t(e);return i.isValid?i:null},t.prototype.addAnimationCallback=function(t){null==this._callbackFunctions&&(this._callbackFunctions=new Array),this._callbackFunctions.push(t)},t.prototype.removeAnimationCallback=function(t){if(null!=this._callbackFunctions){for(var e=-1,i=0;i<this._callbackFunctions.length;i++)if(this._callbackFunctions[i]===t){e=i;break}e>=0&&this._callbackFunctions.splice(e,1)}},t.prototype.clearAnimationCallback=function(){this._callbackFunctions=[]},t.prototype.callAnimationCallback=function(t){this._callbackFunctions.length>0&&this._callbackFunctions.forEach((function(e){e(t)}))},t.prototype.evaluate=function(t,e,i,a,r,n){if(void 0===n&&(n=null),!(e<=.01)){if(this.loop)for(;t>this.duration;)t-=this.duration;if(this.parameterTracks.forEach((function(n){if("PARAM_ANGLE_X"!=n.targetId&&"PARAM_ANGLE_Y"!=n.targetId&&"PARAM_EYE_BALL_X"!=n.targetId&&"PARAM_EYE_BALL_Y"!=n.targetId&&"ParamAngleX"!=n.targetId&&"ParamAngleY"!=n.targetId&&"ParamEyeBallX"!=n.targetId&&"ParamEyeBallY"!=n.targetId){var s=a.parameters.ids.indexOf(n.targetId);if(s>=0){var o=n.evaluate(t);1!=r[0][s]&&(a.parameters.values[s]=a.parameters.defaultValues[s],r[0][s]=!0),a.parameters.values[s]=i(a.parameters.values[s],o,n.evaluate(0),e)}}})),this.partOpacityTracks.forEach((function(n){var s=a.parts.ids.indexOf(n.targetId);if(s>=0){var o=n.evaluate(t);1!=r[1][s]&&(a.parts.opacities[s]=1,r[1][s]=!0),a.parts.opacities[s]=i(a.parts.opacities[s],o,n.evaluate(0),e)}})),this.modelTracks.forEach((function(s){if(null!=n){var o=n.getGroupById(s.targetId);if(null!=o&&"Parameter"===o.target)for(var u=0,l=o.ids;u<l.length;u++){var h=l[u],c=a.parameters.ids.indexOf(h);if(c>=0){var p=s.evaluate(t);1!=r[0][c]&&(a.parameters.values[c]=a.parameters.defaultValues[c],r[0][c]=!0),a.parameters.values[c]=i(a.parameters.values[c],p,s.evaluate(0),e)}}}})),null!=this._callbackFunctions)for(var s=0,o=this.userDataBodys;s<o.length;s++){var u=o[s];this.isEventTriggered(u.time,t,this._lastTime,this.duration)&&this.callAnimationCallback(u.value)}this._lastTime=t}},t.prototype.isEventTriggered=function(t,e,i,a){if(e>i){if(t>i&&t<e)return!0}else if(t>0&&t<e||t>i&&t<a)return!0;return!1},Object.defineProperty(t.prototype,"isValid",{get:function(){return!0},enumerable:!0,configurable:!0}),t}();t.Animation=s;var o=function(){function t(){}return t.LINEAR=function(t,e){return t/e},t}();t.BuiltinCrossfadeWeighters=o;var u=function(){};t.AnimationState=u;var l=function(){function t(){}return t.OVERRIDE=function(t,e,i,a){return e*a+t*(1-a)},t.ADD=function(t,e,i,a){return t+(e-i)*a},t.MULTIPLY=function(t,e,i){return t*(1+(e-1)*i)},t}();t.BuiltinAnimationBlenders=l;var h=function(){function t(){this.weight=1}return Object.defineProperty(t.prototype,"currentAnimation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._time},set:function(t){this._time=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._play},enumerable:!0,configurable:!0}),t.prototype.play=function(t,e){void 0===e&&(e=0),this._animation&&e>0?(this._goalAnimation=t,this._goalTime=0,this._fadeTime=0,this._fadeDuration=e):(this._animation=t,this.currentTime=0,this._play=!0)},t.prototype.resume=function(){this._play=!0},t.prototype.pause=function(){this._play=!1},t.prototype.stop=function(){this._play=!1,this.currentTime=0},t.prototype._update=function(t){this._play&&(this._time+=t,this._goalTime+=t,this._fadeTime+=t)},t.prototype._evaluate=function(t,e){if(null!=this._animation){var i=this.weight<1?this.weight:1,a=null!=this._goalAnimation?i*this.weightCrossfade(this._fadeTime,this._fadeDuration):i;this._animation.evaluate(this._time,a,this.blend,t,e,this.groups),null!=this._goalAnimation&&(a=1-i*this.weightCrossfade(this._fadeTime,this._fadeDuration),this._goalAnimation.evaluate(this._goalTime,a,this.blend,t,e,this.groups),this._fadeTime>this._fadeDuration&&(this._animation=this._goalAnimation,this._time=this._goalTime,this._goalAnimation=null))}},t}();t.AnimationLayer=h;var c=function(){function t(t,e,i){this._target=t,this.timeScale=e,this._layers=i}return Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t.prototype.addLayer=function(t,e,i){void 0===e&&(e=l.OVERRIDE),void 0===i&&(i=1);var a=new h;a.blend=e,a.weightCrossfade=o.LINEAR,a.weight=i,a.groups=this.groups,this._layers.set(t,a)},t.prototype.getLayer=function(t){return this._layers.has(t)?this._layers.get(t):null},t.prototype.removeLayer=function(t){return this._layers.has(t)?this._layers.delete(t):null},t.prototype.updateAndEvaluate=function(t){var e=this;(t*=this.timeScale>0?this.timeScale:0)>.001&&this._layers.forEach((function(e){e._update(t)}));var i=new Array(this._target.parameters.count).fill(!1),a=new Array(this._target.parts.count).fill(!1),r=new Array(i,a);this._layers.forEach((function(t){t._evaluate(e._target,r)}))},t._create=function(e,i,a){var r=new t(e,i,a);return r.isValid?r:null},Object.defineProperty(t.prototype,"isValid",{get:function(){return null!=this._target},enumerable:!0,configurable:!0}),t}();t.Animator=c;var p=function(){function t(){this._timeScale=1,this._layerNames=new Array,this._layerBlenders=new Array,this._layerCrossfadeWeighters=new Array,this._layerWeights=new Array}return t.prototype.setTarget=function(t){return this._target=t,this},t.prototype.setTimeScale=function(t){return this._timeScale=t,this},t.prototype.addLayer=function(t,e,i){return void 0===e&&(e=l.OVERRIDE),void 0===i&&(i=1),this._layerNames.push(t),this._layerBlenders.push(e),this._layerCrossfadeWeighters.push(o.LINEAR),this._layerWeights.push(i),this},t.prototype.build=function(){for(var t=new Map,e=0;e<this._layerNames.length;++e){var i=new h;i.blend=this._layerBlenders[e],i.weightCrossfade=this._layerCrossfadeWeighters[e],i.weight=this._layerWeights[e],t.set(this._layerNames[e],i)}return c._create(this._target,this._timeScale,t)},t}();t.AnimatorBuilder=p;var f=function(){function t(t,e){this.x=t,this.y=e}return t.distance=function(t,e){return Math.abs(t.substract(e).length)},t.dot=function(t,e){return t.x*e.x+t.y*e.y},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(t.dot(this,this))},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.substract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.multiply=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.multiplyByScalar=function(e){return this.multiply(new t(e,e))},t.prototype.divide=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.divideByScalar=function(e){return this.divide(new t(e,e))},t.prototype.rotateByRadians=function(e){return new t(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e))},t.prototype.normalize=function(){var e=this.length;return new t(this.x/e,this.y/e)},t.zero=new t(0,0),t}();t.PhysicsVector2=f;var y=function(){function t(){}return t.clampScalar=function(t,e,i){return t<e?e:t>i?i:t},t.directionToDegrees=function(e,i){var a=t.directionToRadians(e,i),r=t.radiansToDegrees(a);return i.x-e.x>0?-r:r},t.radiansToDegrees=function(t){return 180*t/Math.PI},t.radiansToDirection=function(t){return new f(Math.sin(t),Math.cos(t))},t.degreesToRadians=function(t){return t/180*Math.PI},t.directionToRadians=function(t,e){var i=f.dot(t,e),a=t.length*e.length;if(0==a)return 0;var r=i/a;return Math.abs(r)<=1?Math.acos(r):0},t.gravity=new f(0,-1),t.wind=new f(0,0),t.maximumWeight=100,t.airResistance=5,t.movementThreshold=.001,t.correctAngles=!0,t}();t.Physics=y;var d=function(t,e,i,a,r){this.initialPosition=t,this.mobility=e,this.delay=i,this.acceleration=a,this.radius=r,this.position=t,this.lastPosition=this.position,this.lastGravity=new f(0,-1),this.force=new f(0,0),this.velocity=new f(0,0)};t.PhysicsParticle=d;var m=function(){function t(t,e,i){this.x=t,this.y=e,this.angle=i}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.angle+e.angle)},t}();t.PhysicsFactorTuple=m;var g=function(t,e,i){this.minimum=t,this.maximum=e,this.def=i};t.PhysicsNormalizationTuple=g;var v=function(t,e){this.position=t,this.angle=e};t.PhysicsNormalizationOptions=v;var _=function(){function t(t,e,i,a){this.targetId=t,this.weight=e,this.factor=i,this.invert=a}return Object.defineProperty(t.prototype,"normalizedWeight",{get:function(){return y.clampScalar(this.weight/y.maximumWeight,0,1)},enumerable:!0,configurable:!0}),t.prototype.evaluateFactor=function(t,e,i,a,r){console.assert(i>e);var n=this.getMiddleValue(e,i),s=t-n;switch(Math.sign(s)){case 1:if(0==(o=i-n))s=r.angle.def;else 0==(u=r.angle.maximum-r.angle.def)?s=r.angle.maximum:(s*=Math.abs(u/o),s+=r.angle.def);break;case-1:var o,u;if(0==(o=n-e))s=r.angle.def;else 0==(u=r.angle.def-r.angle.minimum)?s=r.angle.minimum:(s*=Math.abs(u/o),s+=r.angle.def);break;case 0:s=r.angle.def}var l=this.weight/y.maximumWeight;return s*=this.invert?1:-1,new m(s*this.factor.x*l,s*this.factor.y*l,s*this.factor.angle*l)},t.prototype.getRangeValue=function(t,e){var i=Math.max(t,e),a=Math.min(t,e);return Math.abs(i-a)},t.prototype.getMiddleValue=function(t,e){return Math.min(t,e)+this.getRangeValue(t,e)/2},t}();t.PhysicsInput=_;var b=function(){function t(t,e,i,a,r,n){this.targetId=t,this.particleIndex=e,this.weight=i,this.factor=r,this.invert=n,this.factor.angle*=a}return Object.defineProperty(t.prototype,"normalizedWeight",{get:function(){return y.clampScalar(this.weight/y.maximumWeight,0,1)},enumerable:!0,configurable:!0}),t.prototype.evaluateValue=function(t,e){var i=t.x*this.factor.x+t.y*this.factor.y;if(this.factor.angle>0){var a=y.gravity;y.correctAngles&&this.particleIndex>1&&(a=e[this.particleIndex-2].position.substract(e[this.particleIndex-1].position));var r=y.directionToRadians(a,t);i+=(t.x-a.x>0?-r:r)*this.factor.angle}return i*=this.invert?-1:1},t}();t.PhysicsOutput=b;var w=function(){function t(t,e,i,a){this.input=t,this.output=e,this.particles=i,this.normalization=a}return t.prototype._update=function(t,e){var i=this,a=e.parameters,r=new m(0,0,0);this.input.forEach((function(t){var e=a.ids.indexOf(t.targetId);-1!=e&&(r=r.add(t.evaluateFactor(a.values[e],a.minimumValues[e],a.maximumValues[e],a.defaultValues[e],i.normalization)))}));var n=y.degreesToRadians(-r.angle),s=new f(r.x,r.y).rotateByRadians(n);r.x=s.x,r.y=s.y;var o=n,u=y.radiansToDirection(o).normalize();this.particles.forEach((function(e,a){if(0!=a){e.force=u.multiplyByScalar(e.acceleration).add(y.wind),e.lastPosition=e.position;var n=e.delay*t*30,s=e.position.substract(i.particles[a-1].position),o=f.distance(f.zero,s),l=y.directionToDegrees(e.lastGravity,u),h=y.degreesToRadians(l)/y.airResistance;s=s.rotateByRadians(h).normalize(),e.position=i.particles[a-1].position.add(s.multiplyByScalar(o));var c=e.velocity.multiplyByScalar(n),p=e.force.multiplyByScalar(n).multiplyByScalar(n);e.position=e.position.add(c).add(p);var d=e.position.substract(i.particles[a-1].position).normalize();e.position=i.particles[a-1].position.add(d.multiplyByScalar(e.radius)),Math.abs(e.position.x)<y.movementThreshold&&(e.position.x=0),e.velocity=0!=n?e.position.substract(e.lastPosition).divideByScalar(n).multiplyByScalar(e.mobility):f.zero,e.force=f.zero,e.lastGravity=u}else e.position=new f(r.x,r.y)}))},t.prototype._evaluate=function(t){var e=this,i=t.parameters;this.output.forEach((function(t){console.assert(t.particleIndex>0&&t.particleIndex<e.particles.length);var a=i.ids.indexOf(t.targetId);if(-1!=a){var r=e.particles[t.particleIndex-1].position.substract(e.particles[t.particleIndex].position),n=y.clampScalar(t.evaluateValue(r,e.particles),i.minimumValues[a],i.maximumValues[a]),s=i.values[a]*(1-t.normalizedWeight)+n*t.normalizedWeight;i.values[a]=y.clampScalar(s,i.minimumValues[a],i.maximumValues[a])}}))},t}();t.PhysicsSubRig=w;var A=function(){function t(t,e,i){var a=this;this.timeScale=1,this.timeScale=e,this._target=t,t&&(this._subRigs=new Array,i.PhysicsSettings.forEach((function(t){var e=new Array;t.Input.forEach((function(t){var i=new m(1,0,0);"Y"==t.Type?(i.x=0,i.y=1):"Angle"==t.Type&&(i.x=0,i.angle=1),e.push(new _(t.Source.Id,t.Weight,i,t.Reflect))}));var i=new Array;t.Output.forEach((function(t){var e=new m(1,0,0);"Y"==t.Type?(e.x=0,e.y=1):"Angle"==t.Type&&(e.x=0,e.angle=1),i.push(new b(t.Destination.Id,t.VertexIndex,t.Weight,t.Scale,e,t.Reflect))}));var r=new Array;t.Vertices.forEach((function(t){var e=new f(t.Position.X,t.Position.Y);r.push(new d(e,t.Mobility,t.Delay,t.Acceleration,t.Radius))}));var n=t.Normalization,s=new g(n.Position.Minimum,n.Position.Maximum,n.Position.Default),o=new g(n.Angle.Minimum,n.Angle.Maximum,n.Angle.Default),u=new v(s,o);a._subRigs.push(new w(e,i,r,u))})))}return t.prototype.updateAndEvaluate=function(t){var e=this;(t*=this.timeScale>0?this.timeScale:0)>.01&&this._subRigs.forEach((function(i){i._update(t,e._target)})),this._subRigs.forEach((function(t){t._evaluate(e._target)}))},t._fromPhysics3Json=function(e,i,a){var r=new t(e,i,a);return r._isValid?r:null},Object.defineProperty(t.prototype,"_isValid",{get:function(){return null!=this._target},enumerable:!0,configurable:!0}),t}();t.PhysicsRig=A;var D=function(){function t(){this._timeScale=1}return t.prototype.setTarget=function(t){return this._target=t,this},t.prototype.setTimeScale=function(t){return this._timeScale=t,this},t.prototype.setPhysics3Json=function(t){return this._physics3Json=t,this},t.prototype.build=function(){return A._fromPhysics3Json(this._target,this._timeScale,this._physics3Json)},t}();t.PhysicsRigBuilder=D;var B=function(){function t(t,e){var i=this;this._target=t,t&&(this._version=e.Version,this._userDataCount=e.Meta.UserDataCount,this._totalUserDataSize=e.Meta.TotalUserDataSize,null!=e.UserData&&(this._userDataBodys=new Array,e.UserData.forEach((function(t){i._userDataBodys.push(new P(t.Target,t.Id,t.Value))})),console.assert(this._userDataBodys.length===this._userDataCount)))}return t._fromUserData3Json=function(e,i){var a=new t(e,i);return a._isValid?a:null},Object.defineProperty(t.prototype,"_isValid",{get:function(){return null!=this._target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userDataCount",{get:function(){return null==this._userDataBodys?0:this._userDataCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalUserDataSize",{get:function(){return null==this._userDataBodys?0:this._totalUserDataSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userDataBodys",{get:function(){return null==this._userDataBodys?null:this._userDataBodys},enumerable:!0,configurable:!0}),t.prototype.isExistUserDataById=function(t){if(null==this._userDataBodys)return!1;for(var e=0,i=this._userDataBodys;e<i.length;e++){if(i[e].id===t)return!0}return!1},t.prototype.getUserDataValueById=function(t){if(null==this._userDataBodys)return null;for(var e=0,i=this._userDataBodys;e<i.length;e++){var a=i[e];if(a.id===t)return a.value}return null},t.prototype.getUserDataTargetById=function(t){if(null==this._userDataBodys)return null;for(var e=0,i=this._userDataBodys;e<i.length;e++){var a=i[e];if(a.id===t)return a.target}return null},t.prototype.getUserDataBodyById=function(t){if(null==this._userDataBodys)return null;for(var e=0,i=this._userDataBodys;e<i.length;e++){var a=i[e];if(a.id===t)return a}return null},t}();t.UserData=B;var E=function(){function t(){}return t.prototype.setTarget=function(t){return this._target=t,this},t.prototype.setUserData3Json=function(t){return this._userData3Json=t},t.prototype.build=function(){return B._fromUserData3Json(this._target,this._userData3Json)},t}();t.UserDataBuilder=E;var T,P=function(t,e,i){this.target=t,this.id=e,this.value=i};t.UserDataBody=P,function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ArtMesh=1]="ArtMesh"}(T||(T={}));var x=function(){function t(t){var e=this;void 0!==t.Groups?(this._groupBodys=new Array,t.Groups.forEach((function(t){e._groupBodys.push(new I(t.Target,t.Name,t.Ids))}))):this._groupBodys=null}return Object.defineProperty(t.prototype,"data",{get:function(){return null==this._groupBodys?null:this._groupBodys},enumerable:!0,configurable:!0}),t.fromModel3Json=function(e){return new t(e)},t.prototype.getGroupById=function(t){if(null!=this._groupBodys)for(var e=0,i=this._groupBodys;e<i.length;e++){var a=i[e];if(a.name===t)return a}return null},t}();t.Groups=x;var I=function(t,e,i){this.target=t,this.name=e,this.ids=i};t.GroupBody=I}(LIVE2DCUBISMFRAMEWORK||(LIVE2DCUBISMFRAMEWORK={}));
//# sourceMappingURL=/sm/b5872acbc0dd1360a2a4a799d7ca58a968e5de36df9ea340fff8a0f2b810689b.map